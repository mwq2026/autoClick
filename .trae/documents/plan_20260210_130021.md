# 界面布局重构计划

本计划旨在解决“编辑器空间过小、按钮过大、布局浪费”的问题，采用经典的 **“工具栏 + 工作区 + 状态栏”** 布局模式进行重构。

## 1. 核心布局策略
- **移除卡片式堆叠**：废弃原有的 `BeginChild` 固定高度卡片堆叠方式（导致编辑器高度被压缩）。
- **引入顶部工具栏**：将分散的“运行”、“保存”、“设置”等按钮整合为紧凑的顶部工具栏。
- **最大化工作区**：让 Lua 编辑器（及文档面板）自动填充所有剩余空间。
- **折叠低频功能**：将“Trc 转 Lua”等低频转换工具移入下拉菜单或弹窗，不再常驻占用底部空间。

## 2. 详细修改方案 (src/app/App.cpp)

### A. 全局框架 (`OnFrame`)
- **Header 优化**：
    - 保持 Logo 和标题。
    - 压缩“简单/高级模式”切换按钮的布局，使其更紧凑。
- **StatusBar 优化**：
    - 保持底部状态栏，但确保高度适中（约 30-40px），仅显示关键状态。

### B. 高级模式 (`DrawAdvancedMode`) - 重构重点
**新布局结构（从上到下）：**
1.  **文件栏 (一行)**：
    - `[文件路径输入框]` (自适应宽) + `[浏览...]` + `[保存]` + `[另存为]`。
2.  **工具栏 (一行)**：
    - **核心操作**：`[▶ 运行脚本]` (绿色)  `[■ 停止]` (红色/灰色)  `[⏳ 调试/编译]` (如有)。
    - **视图控制**：`[Run时最小化(Checkbox)]`  `[API文档(Toggle)]`  `[智能补全(Toggle)]`。
    - **更多工具**：`[转换工具 ▼]` (下拉菜单，包含原底部的 Trc 转 Lua 功能、容差设置等)。
3.  **工作区 (填充剩余)**：
    - **编辑器**：占据主要空间。
    - **API 文档**：作为侧边栏（可开关），与编辑器左右分栏。

### C. 简单模式 (`DrawSimpleMode`)
- **顶部设置**：将文件路径、倍速、循环次数等设置紧凑排列，减少垂直占用。
- **中间列表**：让事件列表 (`Event List`) 占据最大剩余空间，方便查看长脚本。
- **底部控制**：保留“录制”和“回放”大按钮（用户易点击），但优化其高度和间距。

## 3. 视觉与交互微调
- **按钮尺寸**：放弃全宽大按钮，改用适应文字内容的紧凑按钮。
- **间距调整**：缩小 `ItemSpacing`，增加信息密度。
- **配色微调**：利用 ImGui Style 稍微区分工具栏背景与编辑器背景。

## 4. 预期效果
- **编辑器高度**：预计增加 **50% 以上** 的可视高度（移除原底部 140px 的转换卡片 + 压缩顶部）。
- **操作效率**：常用功能一目了然，不需要滚动页面寻找按钮。
- **美观度**：布局更加专业、整洁，类似 VS Code 或 IDE 的体验。
